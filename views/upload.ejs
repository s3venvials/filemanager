<% include ./partials/header %>
<% include ./partials/nav %>

<div class="container" style="margin-top: 5em;">
        <% include ./partials/flash-messages %>
        <div class="alert alert-danger" role="alert" style="display: none;">
            <small><i class="fas fa-exclamation-circle"></i><span id="errMsg"></span></small>
        </div>
    <div style="border: 1px solid #EEE; border-radius: 10px; padding: 2em; box-shadow: 8px 8px 5px #999;">
        <div class="col-md-12">
            <small class="float-right">Vr 1.0</small>
        </div>
        <div class="col-md-8">
            <h4><i class="fas fa-upload"></i> File Upload</h4>
            <form id="myForm" action="/" method="POST" enctype="multipart/form-data">
                <div class="row">
                    <div class="col-md">
                        <div class="form-group">
                            <input id="docInput" class="form-control" name="file" type="file" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <button type="submit" class="btn btn-dark" style="width: 100%">Upload</button>
                    </div>
                    <div class="col-md-3">
                        <button type="reset" class="btn btn-warning" style="width: 100%">Clear</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

        <script>
            $(document).ready(function() {

            // $.ajax({
            //     url: '/api',
            //     cache: false,
            //     method: 'GET',
            //     success: function(datax) {
            //            var data = JSON.parse(datax)
            //             for(var i = 0; i < data.length; i++) {
            //             var links = data[i].split(".")[0]
            //             // console.log(links)
            //             $('#list').append("<option value=" + "'" + data[i] + "'" + ">" + links + "</option>");
            //         }
            //     }
            // })
        });

            $("#myForm").on("submit", function(e) {

                if($("#docInput").val() === "") {
                    e.preventDefault();
                    $("#errMsg").text(" File not found.");
                    $(".alert-danger").show();
                    $('.alert-success').hide();
                } else {
                    $(".alert-danger").hide();
                    $(this).unbind('submit').submit();
                }  
            });

            $('#delForm').on("submit", function(e) {
                if($('#list').find(':selected').val() === "") {
                    e.preventDefault();
                    $("#errMsg").text(" No file selected to delete.");
                    $(".alert-danger").show();
                    $('.alert-success').hide();
                } else {
                    $(".alert-danger").hide();
                    $("#alert-info").show();
                    // $(this).unbind('submit').submit();
                }
            });
        </script>


<% include ./partials/footer %>