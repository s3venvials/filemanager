<% include ./partials/header %>
<% include ./partials/nav %>

<div class="container" style="margin-top: 5em;">
        <% include ./partials/flash-messages %>
        <% if(files.length === 0) { %>
            <h4><i class="fas fa-file"></i> File View</h4>
        <hr />
            <h6>There are no public files to be displayed. <a href="/filemanager/upload">Upload a file.</a></h6>
            <!-- <h6>Looking for a private file storage solution? <a href="/">Create an account.</a></h6> -->

        <% } else { %>
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" href="/filemanager">File Manager</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/filemanager/upload">File Upload</a>
            </li>
        </ul>
        <br />
    <div class="row">
        <div class="col-md-6">
            <h4><i class="fas fa-file"></i> File View</h4>
        </div>
        <div class="col-md-6">
            <a href="/filemanager/api" class="btn btn-primary btn-sm float-right" title="Application Program Interface"><i class="fas fa-code"></i> API</a>
        </div>
    </div>
    <table class="table" id="myTable">
        <thead>
            <tr>
                <!-- <th>Select</th> -->
                <th>File</th>
                <th>Length</th>
                <th>Date/Time</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody>
            <% files.forEach(function(file) { %>
            <tr>
                <td><a href="filemanager/files/<%= file.filename %>"><%= file.filename %></a></td>
                <td><%= file.length %></td>
                <td><%= file.uploadDate %></td>
                <td>
                    <form method="POST" action="/filemanager/files/<%= file._id %>?_method=DELETE">
                        <input type='hidden' name="filename" value="<%= file.filename %>" />
                        <button class="btn btn-danger" style="background: 0 0; border: none; padding: 0;" id="delBtn"><i  style="color: red;" class="fas fa-minus-square"></i></button>
                    </form>
                </td>
            </tr>
            <% }); %>
        </tbody>
    </table>
    <% } %>
    <small>Powered By: Server- Node.js, Framework- Express, Template Engine- EJS, Database- MongoDB</small><br />
    <small>Github Repository: <a href="https://github.com/s3venvials/filemanager" target="_blank">Document Manager</a></small>
</div>

<% include ./partials/footer %>