<% include ./partials/header %>
<% include ./partials/nav %>

<div class="container" style="margin-top: 5em;">
        <% include ./partials/flash-messages %>
        <% if(files.length === 0) { %>
            <h4><i class="fas fa-file"></i> File View</h4>
        <hr />
            No files have been uploaded to display. <br />
        <% } else { %>
    <div class="row">
        <div class="col-md-6">
            <h4><i class="fas fa-file"></i> File View</h4>
        </div>
    </div>
    <table class="table" id="myTable">
        <thead>
            <tr>
                <!-- <th>Select</th> -->
                <th>File</th>
                <th>Length</th>
                <th>Date/Time</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody>
            <% files.forEach(function(file) { %>
            <tr>
                <td><a href="files/<%= file.filename %>"><%= file.filename %></a></td>
                <td><%= file.length %></td>
                <td><%= file.uploadDate %></td>
                <td>
                    <form method="POST" action="/files/<%= file._id %>?_method=DELETE">
                        <input type='hidden' name="filename" value="<%= file.filename %>" />
                        <button class="btn btn-danger" style="background: 0 0; border: none; padding: 0;" id="delBtn"><i  style="color: red;" class="fas fa-minus-square"></i></button>
                    </form>
                </td>
            </tr>
            <% }); %>
        </tbody>
    </table>
    <% } %>
    <small>Powered By: Server- Node.js, Framework- Express, Template Engine- EJS, Database- MongoDB</small><br />
    <small>Github Repository: <a href="https://github.com/s3venvials/filemanager" target="_blank">Document Manager</a></small>
</div>

<script type="text/javascript">
   $(document).ready(function() {
        $("button").click(function(){
            // var checked = [];
            // $.each($("input[name='file-group']:checked"), function(){            
            //     checked.push($(this).val());
            // });
            // // alert("Inputs that are checked are: " + checked.join(", "));
            // return checked;
        });
    });
</script>

<% include ./partials/footer %>